{"ast":null,"code":"var _jsxFileName = \"/Users/jie/Desktop/penn-housing/penn-housing-review/src/components/UserProfile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport { getUserPosts, updateUserPassword } from '../api/userAPI';\nimport Banner from './Banner';\nimport '../styles/UserProfile.css';\nimport { TextField, Button } from '@mui/material';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserProfile(_ref) {\n  _s();\n  let {\n    username\n  } = _ref;\n  const [password, setPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [posts, setPosts] = useState([]);\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const userPosts = await getUserPosts(username);\n      setPosts(userPosts);\n    };\n    fetchPosts();\n  }, [username]);\n  const handlePasswordChange = async e => {\n    e.preventDefault();\n    if (newPassword !== confirmPassword) {\n      alert('New password and confirm password do not match!');\n      return;\n    }\n\n    // Call the API function to update the user password\n    const isPasswordUpdated = await updateUserPassword(username, password, newPassword);\n    if (isPasswordUpdated) {\n      alert('Password updated successfully!');\n    } else {\n      alert('Error updating password. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-profile\",\n    children: [/*#__PURE__*/_jsxDEV(Banner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-profile-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Your Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePasswordChange,\n        className: \"password-change-form\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"password\",\n          label: \"Current Password\",\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true,\n          \"data-testid\": \"current-password\" // Add this line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"new-password\",\n          label: \"New Password\",\n          type: \"password\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value),\n          required: true,\n          \"data-testid\": \"new-password\" // Add this line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"confirm-password\",\n          label: \"Confirm New Password\",\n          type: \"password\",\n          value: confirmPassword,\n          onChange: e => setConfirmPassword(e.target.value),\n          required: true,\n          \"data-testid\": \"confirm-password\" // Add this line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          \"data-testid\": \"change-password\",\n          children: \"Change Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logout-container\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            className: \"logout-button\",\n            onClick: () => {\n              localStorage.removeItem('userID');\n              localStorage.removeItem('username');\n              window.location.href = '/';\n            },\n            children: \"Log out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '20px'\n        },\n        className: \"posts-container\",\n        children: posts.map((post, index) => /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              component: \"div\",\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              children: post.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(UserProfile, \"bTtskoe1m2z/CfWPilM6bNyIql8=\");\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useState","useEffect","getUserPosts","updateUserPassword","Banner","TextField","Button","Card","CardContent","Typography","IconButton","ExitToAppIcon","jsxDEV","_jsxDEV","UserProfile","_ref","_s","username","password","setPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","posts","setPosts","fetchPosts","userPosts","handlePasswordChange","e","preventDefault","alert","isPasswordUpdated","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","id","label","type","value","onChange","target","required","variant","color","onClick","localStorage","removeItem","window","location","href","style","display","flexDirection","gap","map","post","index","component","title","description","_c","$RefreshReg$"],"sources":["/Users/jie/Desktop/penn-housing/penn-housing-review/src/components/UserProfile.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport { getUserPosts, updateUserPassword } from '../api/userAPI';\nimport Banner from './Banner';\nimport '../styles/UserProfile.css';\nimport { TextField,Button } from '@mui/material';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\n\n\nfunction UserProfile({ username }) {\n  const [password, setPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const userPosts = await getUserPosts(username);\n      setPosts(userPosts);\n    };\n\n    fetchPosts();\n  }, [username]);\n\n  const handlePasswordChange = async (e) => {\n    e.preventDefault();\n\n    if (newPassword !== confirmPassword) {\n      alert('New password and confirm password do not match!');\n      return;\n    }\n\n    // Call the API function to update the user password\n    const isPasswordUpdated = await updateUserPassword(username, password, newPassword);\n\n    if (isPasswordUpdated) {\n      alert('Password updated successfully!');\n    } else {\n      alert('Error updating password. Please try again.');\n    }\n\n  };\n\n  return (\n    <div className=\"user-profile\">\n      <Banner />\n\n      <div className=\"user-profile-content\" >\n      <div className=\"user-info-header\">\n        <h1>Your Info</h1>\n      </div>\n      <form onSubmit={handlePasswordChange} className=\"password-change-form\">\n      <TextField\n        id=\"password\"\n        label=\"Current Password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        required\n        data-testid=\"current-password\" // Add this line\n        />\n\n    <TextField\n        id=\"new-password\"\n        label=\"New Password\"\n        type=\"password\"\n        value={newPassword}\n        onChange={(e) => setNewPassword(e.target.value)}\n        required\n        data-testid=\"new-password\" // Add this line\n        />\n\n    <TextField\n        id=\"confirm-password\"\n        label=\"Confirm New Password\"\n        type=\"password\"\n        value={confirmPassword}\n        onChange={(e) => setConfirmPassword(e.target.value)}\n        required\n        data-testid=\"confirm-password\" // Add this line\n        />\n\n    <Button type=\"submit\" variant=\"contained\" color=\"primary\" data-testid=\"change-password\">\n        Change Password\n        </Button>\n\n\n      <div className=\"logout-container\">\n        {/* Update the logout button */}\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className=\"logout-button\"\n          onClick={() => {\n            localStorage.removeItem('userID');\n            localStorage.removeItem('username');\n            window.location.href = '/';\n          }}\n        >\n          Log out\n        </Button>\n      </div>\n    </form>\n\n    <h3>Posts</h3>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }} className=\"posts-container\">\n          {posts.map((post, index) => (\n            <Card key={index}>\n              <CardContent>\n                <Typography variant=\"h5\" component=\"div\">\n                  {post.title}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {post.description}\n                </Typography>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n\n      \n    </div>\n  );\n}\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}